<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PEGASUS</title>
    <!-- Carica Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Carica Font Awesome per le icone -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
    
    <!-- RIFERIMENTO AL MANIFEST PER PWA -->
    <link rel="manifest" href="/pegasus/manifest.json">
    
    <!-- RIFERIMENTO AL FOGLIO DI STILE ESTERNO -->
    <link rel="stylesheet" href="/pegasus/style.css">
</head>
<body data-theme="light">

    <!-- Contenitore Principale -->
    <div id="main-container" class="p-4 mx-auto max-w-xl w-full transition-colors duration-300">
        <div id="app-content">
            <!-- Contenuto della pagina iniettato dal JavaScript -->
            <p class="text-center text-red-500">
                Caricamento in corso... Se il contenuto non appare, la logica JavaScript (logic.js) non Ã¨ stata caricata.
            </p>
        </div>
    </div>

    <!-- Barra di Navigazione Fissa in Basso -->
    <nav id="bottom-nav" class="flex justify-around items-center">
        <!-- Pulsante Installa (inizialmente nascosto) -->
        <button id="install-button" 
                class="hidden flex flex-col items-center text-sm p-2 rounded-full transition-colors duration-300 var(--text-color) hover:var(--primary-color) text-red-500 hover:text-red-700"
                aria-label="Installa l'applicazione sul tuo dispositivo">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3" />
            </svg>
            <span class="text-xs mt-1">Installa</span>
        </button>
        
        <!-- I pulsanti di navigazione sono gestiti dal JavaScript -->
        <button id="nav-home" class="nav-item w-1/4 h-full flex flex-col items-center justify-center text-xs sm:text-sm" data-page="home">
            <i class="fas fa-home text-xl mb-1"></i>
            <span>Home</span>
        </button>
        <button id="nav-dashboard" class="nav-item w-1/4 h-full flex flex-col items-center justify-center text-xs sm:text-sm" data-page="dashboard">
            <i class="fas fa-chart-line text-xl mb-1"></i>
            <span>Dashboard</span>
        </button>
        <button id="nav-profile" class="nav-item w-1/4 h-full flex flex-col items-center justify-center text-xs sm:text-sm" data-page="profile">
            <i class="fas fa-user-circle text-xl mb-1"></i>
            <span>Profilo</span>
        </button>
        <button id="nav-settings" class="nav-item w-1/4 h-full flex flex-col items-center justify-center text-xs sm:text-sm" data-page="settings">
            <i class="fas fa-cog text-xl mb-1"></i>
            <span>Impostaz.</span>
        </button>
    </nav>

    <!-- RIFERIMENTO ALLA LOGICA JAVASCRIPT -->
    <script src="/pegasus/logic.js"></script>

    <!-- IFERIMENTO ALLA REGISTRAZIONE DEL SERVICE WORKER -->
    <script>
        function registerServiceWorker() {
            if ('serviceWorker' in navigator) {
                window.addEventListener('load', () => {
                    // Registra il Service Worker usando il percorso corretto
                    navigator.serviceWorker.register('/pegasus/service-worker.js')
                        .then(reg => {
                            console.log('Service Worker PEGASUS registrato con successo.');
                        })
                        .catch(err => {
                            console.error('Registrazione Service Worker PEGASUS fallita:', err);
                        });
                });
            } else {
                console.log('Il browser non supporta i Service Workers.');
            }
        }
    
        // Chiama la funzione di registrazione
        registerServiceWorker(); 
    </script>
</body>
</html>
